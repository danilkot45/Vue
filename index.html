<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Vue</title>
</head>

<body>
    <div class="wrapper">
        <div class="lessonOne">
            <h1>{{message}}</h1>
            <form>
                <app-form  :add="addTask" :value="newTitle" @input="newTitle = $event"> </app-form>
            </form>
            <app-btn-statistic :compl="completedTasks" :id="nextId" :comptask="completeTasklist"></app-btn-statistic>
            <br><br>
            <ul class="list-group">
                <app-list v-for="(i, index) in todoItems" :key="i.id" :id="index" :text="i.text" :btntext="btnText(index)" :color="btnColor(index)" ></app-list>
            </ul>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script>
        Vue.component("app-form",{
            props:{
                value: String,
                add:Function
            },
            methods:{},
            template: `<div class="input-group mb-3"> 
                         <input type="text" class="form-control" placeholder="Add new Task" :value="value" @input="$emit('input', $event.target.value)" >
                            <div class="input-group-append">
                              <button :disabled="value.length === 0 || !value.trim()" class="btn btn-outline-secondary"  @click="add()">Add</button> 
                            </div> 
                      </div>`

        })
        Vue.component("app-btn-statistic",{
            props:{
                compl: Number,
                id:Number,
                comptask:String 
            },
            methods:{},
            template: '<div> <button class="btn btn-primary"> Ð¡ompleted tasks {{compl}}</button> <button class="btn btn-primary"> all tasks {{id - 1}}</button> <button class="btn btn-primary"> Precent complete tasklist {{comptask}}</button> </div>'

        })
        Vue.component("app-list",{
            // props:['text','id','color','btntext'],
            props:{
            text:String,
            id:Number,
            color:String,
            btntext:String
            },
            methods:{},
            template: `<li  class="list-group-item">  
                        <button :class="color">{{btntext}}</button> {{text}}
                       </li> `
        })
        new Vue({
            el: '.lessonOne',
            data: {
                message: 'Hello from Vue App',
                todoItems: [
                    { id: 1, text: 'task 1', done: false },
                    { id: 2, text: 'task 2', done: false },
                    { id: 3, text: 'task 3', done: true },
                    { id: 4, text: 'task 4', done: false },
                    { id: 5, text: 'task 5', done: false }
                ],
                nextId: 6,
                newTitle:'',
                count: 0
            },
            computed:{
                completedTasks(){
                    this.count = 0
                    for(i in this.todoItems){
                        if(this.todoItems[i].done === true){
                            this.count ++
                        }
                    }
                    return this.count
                },
                completeTasklist(){
                    return (this.count/(this.nextId-1)*100).toFixed(2) +'%' 
                }
            },
            methods: {
                btnText(id) {
                    return this.todoItems[id].done === true ? 'completed' : 'in order'
                },
                btnColor(id) {
                    return this.todoItems[id].done === true ? 'btn btn-success' : 'btn btn-secondary'
                },
                addTask() {
                        this.todoItems.push({
                            id: this.nextId++,
                            text: this.newTitle,
                            done: false
                        })
                        // console.log(this.newTitle)
                        // console.log(this.todoItems)
                        this.newTitle = ''
                        
                }
            }
        })
    </script>
</body>

</html>